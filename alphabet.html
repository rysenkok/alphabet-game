<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–£—á–∏–º –∞–ª—Ñ–∞–≤–∏—Ç</title>
  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f0f8ff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .game-container {
      width: 900px;
      max-width: 100%;
      height: 600px;
      max-height: 100%;
      background: #ffffff;
      border-radius: 24px;
      box-shadow: 0 12px 32px rgba(0,0,0,0.15);
      display: flex;
      overflow: hidden;
      position: relative;
    }
    .left, .right {
      padding: 24px;
      box-sizing: border-box;
    }
    .left {
      flex: 2;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 16px;
    }
    .right {
      flex: 1;
      background: linear-gradient(180deg,#ffecd2,#fcb69f);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    .letter-box {
      width: 220px;
      height: 220px;
      border-radius: 32px;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 10px 25px rgba(0,0,0,0.2);
      font-size: 160px;
      font-weight: 900;
      color: #ff6b6b;
    }
    .level-info {
      margin-top: 16px;
      font-size: 18px;
      color: #5b3a29;
      text-align: center;
      font-weight: 600;
    }
    .images-row {
      display: flex;
      gap: 16px;
      justify-content: center;
    }
    .image-option {
      flex: 1;
      min-width: 0;
      background: #f5f5ff;
      border-radius: 20px;
      border: 4px solid transparent;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      padding: 8px;
      transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease, background .15s ease;
    }
    .image-option img {
      max-width: 100%;
      max-height: 160px;
      object-fit: contain;
      border-radius: 16px;
    }
    .image-caption {
      margin-top: 6px;
      font-size: 20px;
      font-weight: 600;
      color: #333;
    }
    .image-option:hover {
      transform: translateY(-4px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.15);
      background: #eef2ff;
    }
    .image-option.correct {
      border-color: #22c55e;
    }
    .image-option.wrong {
      border-color: #ef4444;
    }
    .message {
      margin-top: 12px;
      font-size: 20px;
      font-weight: 600;
      text-align: center;
      min-height: 28px;
    }
    .message.ok {
      color: #16a34a;
    }
    .message.error {
      color: #dc2626;
    }

    /* –ø—Ä–æ—Å—Ç–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ */
    .confetti {
      position: absolute;
      top: -10px;
      font-size: 24px;
      animation: confetti-fall linear 2.2s forwards;
      pointer-events: none;
      z-index: 5;
    }
    @keyframes confetti-fall {
      from { transform: translateY(0) rotate(0deg); opacity: 1; }
      to   { transform: translateY(650px) rotate(360deg); opacity: 0; }
    }

    /* –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ ¬´–ø–æ–±–µ–¥–∞¬ª */
    .overlay {
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }
    .overlay-content {
      background: #fff;
      border-radius: 24px;
      padding: 24px 32px;
      text-align: center;
      max-width: 420px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.25);
    }
    .overlay-content h2 {
      margin: 0 0 12px;
      font-size: 26px;
    }
    .overlay-content p {
      margin: 0 0 20px;
      font-size: 18px;
    }
    .btn {
      padding: 10px 24px;
      font-size: 18px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: #22c55e;
      color: #fff;
      font-weight: 600;
      box-shadow: 0 6px 16px rgba(22,163,74,0.5);
    }
    .btn:hover {
      background: #16a34a;
    }
  </style>
</head>
<body>
<div class="game-container">
  <div class="left">
    <div class="images-row" id="imagesRow"></div>
    <div class="message" id="message"></div>
  </div>
  <div class="right">
    <div class="letter-box" id="letterBox">–ê</div>
    <div class="level-info" id="levelInfo"></div>
  </div>

  <div class="overlay" id="winOverlay">
    <div class="overlay-content">
      <h2>–ú–æ–ª–æ–¥–µ—Ü!</h2>
      <p>–¢—ã –≤—ã—É—á–∏–ª –≤—Å–µ –±—É–∫–≤—ã —Ä—É—Å—Å–∫–æ–≥–æ –∞–ª—Ñ–∞–≤–∏—Ç–∞!</p>
      <button class="btn" id="restartAllBtn">–ò–≥—Ä–∞—Ç—å —Å–Ω–∞—á–∞–ª–∞</button>
    </div>
  </div>

  <div id="confettiContainer"></div>
</div>

<audio id="fanfareSound" src="sounds/win.mp3" preload="auto"></audio>
<audio id="wrongSound" src="sounds/loose.wav" preload="auto"></audio>

<script>
  // –ù–∞—Å—Ç—Ä–æ–π: —Å—é–¥–∞ –ø–æ–¥—Å—Ç–∞–≤—å —Å–≤–æ–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏.
  // correct: –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞, others: 2 –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ.
  // –ü—É—Ç–∏ –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–º —Ñ–∞–π–ª–∞–º PNG/JPG/SVG.

const LEVELS = [
  {
    letter: '–ê',
    word: '–ê—Ä–±—É–∑',
    options: [
      { src: 'img/11456831.png', caption: '–ê—Ä–±—É–∑', correct: true },
      { src: 'img/11452733.png',        caption: '–ú–∞—à–∏–Ω–∞', correct: false },
      { src: 'img/10478061.png',      caption: '–î–æ–º',    correct: false }
    ]
  },
  {
    letter: '–ë',
    word: '–ë–∞–±–æ—á–∫–∞',
    options: [
      { src: 'img/butterfly-clipart-lg.png', caption: '–ë–∞–±–æ—á–∫–∞', correct: true },
      { src: 'img/cartoon-sun-clipart-lg.png',       caption: '–°–æ–ª–Ω—Ü–µ',  correct: false },
      { src: 'img/beach-ball-clipart-lg.png',      caption: '–ú—è—á',     correct: false }
    ]
  },
  {
    letter: '–í',
    word: '–í–µ–ª–æ—Å–∏–ø–µ–¥',
    options: [
      { src: 'img/bicycle-clipart-lg.png',   caption: '–í–µ–ª–æ—Å–∏–ø–µ–¥', correct: true },
      { src: 'img/cat-clipart-lg.png',    caption: '–ö–æ—Ç',       correct: false },
      { src: 'img/tree-clipart-lg.png',   caption: '–î–µ—Ä–µ–≤–æ',    correct: false }
    ]
  },
  {
    letter: '–ì',
    word: '–ì—Ä–∏–±',
    options: [
      { src: 'img/mushroom-clipart-lg.png', caption: '–ì—Ä–∏–±',   correct: true },
      { src: 'img/airplane-clipart-lg.png',    caption: '–°–∞–º–æ–ª—ë—Ç', correct: false },
      { src: 'img/horoscope-book-clipart-lg.png',     caption: '–ö–Ω–∏–≥–∞',   correct: false }
    ]
  },
  {
    letter: '–î',
    word: '–î–æ–º',
    options: [
      { src: 'img/home-clipart-lg.png',  caption: '–î–æ–º',     correct: true },
      { src: 'img/bullet-train-clipart-lg.png',  caption: '–ü–æ–µ–∑–¥',   correct: false },
      { src: 'img/morning-glory-flower-clipart-lg.png', caption: '–¶–≤–µ—Ç–æ–∫',  correct: false }
    ]
  },
  {
    letter: '–ï',
    word: '–ï–ª–∫–∞',
    options: [
      { src: 'img/christmas-tree-clipart-lg.png',   caption: '–Å–ª–∫–∞',    correct: true },
      { src: 'img/dog-clipart-lg.png',    caption: '–°–æ–±–∞–∫–∞',  correct: false },
      { src: 'img/pirate-ship-amusement-ride-clipart-lg.png',   caption: '–ö–æ—Ä–∞–±–ª—å', correct: false }
    ]
  },
  {
    letter: '–Å',
    word: '–Å–∂',
    options: [
      { src: 'img/hedgehog-with-apple-mushroom-and-leaf-clipart-lg.png', caption: '–Å–∂',       correct: true },
      { src: 'img/clownfish-clipart-lg.png',     caption: '–†—ã–±–∞',     correct: false },
      { src: 'img/img/bird-clipart-lg.png',     caption: '–ü—Ç–∏—Ü–∞',    correct: false }
    ]
  },
  {
    letter: '–ñ',
    word: '–ñ–∏—Ä–∞—Ñ',
    options: [
      { src: 'img/giraffe-clipart-lg.png', caption: '–ñ–∏—Ä–∞—Ñ', correct: true },
      { src: 'img/chair-clipart-lg.png',   caption: '–°—Ç—É–ª',  correct: false },
      { src: 'img/cloud-with-rain-clipart-lg.png',   caption: '–û–±–ª–∞–∫–æ',correct: false }
    ]
  },
  {
    letter: '–ó',
    word: '–ó–∞—è—Ü',
    options: [
      { src: 'img/easter-bunny-clipart-lg.png',  caption: '–ó–∞—è—Ü',  correct: true },
      { src: 'img/apple-fruits-food-clipart-lg.png',   caption: '–Ø–±–ª–æ–∫–æ',correct: false },
      { src: 'bus-clipart-lg.png',     caption: '–ê–≤—Ç–æ–±—É—Å', correct: false }
    ]
  },
  {
    letter: '–ò',
    word: '–ò—Ä–∏—Å',
    options: [
      { src: 'img/turkey-clipart-lg.png',   caption: '–ò–Ω–¥—é–∫',     correct: true },
      { src: 'img/cowboy-hat-clipart-lg.png',     caption: '–®–ª—è–ø–∞',    correct: false },
      { src: 'student-desk-clipart-lg.png',   caption: '–°—Ç–æ–ª',     correct: false }
    ]
  },
  {
    letter: '–ô',
    word: '–ô–æ–≥—É—Ä—Ç',
    options: [
      { src: 'img/strawberry-yogurt-remix-clipart-lg.png', caption: '–ô–æ–≥—É—Ä—Ç', correct: true },
      { src: 'img/shooting-star-clipart-lg.png',   caption: '–ó–≤–µ–∑–¥–∞', correct: false },
      { src: 'img/red-balloon-clipart-lg.png',caption: '–®–∞—Ä–∏–∫',  correct: false }
    ]
  },
  {
    letter: '–ö',
    word: '–ö–æ—Ç',
    options: [
      { src: 'img/kitten-clipart-lg.png',    caption: '–ö–æ—Ç',   correct: true },
      { src: 'img/aircraft-clipart-lg.png',  caption: '–°–∞–º–æ–ª—ë—Ç', correct: false },
      { src: 'img/wild-cherry-tree-spring-leaf-clipart-lg.png',   caption: '–õ–∏—Å—Ç',  correct: false }
    ]
  },
  {
    letter: '–õ',
    word: '–õ–µ–≤',
    options: [
      { src: 'img/lion-clipart-lg.png',   caption: '–õ–µ–≤',   correct: true },
      { src: 'img/water-bottle-clipart-lg.png', caption: '–ë—É—Ç—ã–ª–∫–∞', correct: false },
      { src: 'img/train-clipart-lg.png',  caption: '–ü–æ–µ–∑–¥', correct: false }
    ]
  },
  {
    letter: '–ú',
    word: '–ú–∞—à–∏–Ω–∞',
    options: [
      { src: 'img/race-car-clipart-lg.png',    caption: '–ú–∞—à–∏–Ω–∞', correct: true },
      { src: 'img/eastern-bluebird-clipart-lg.png',   caption: '–ü—Ç–∏—Ü–∞',  correct: false },
      { src: 'img/strawberry-clipart-lg.png', caption: '–ö–ª—É–±–Ω–∏–∫–∞', correct: false }
    ]
  },
  {
    letter: '–ù',
    word: '–ù–æ—Å–æ—Ä–æ–≥',
    options: [
      { src: 'img/rhinoceros-clipart-lg.png',  caption: '–ù–æ—Å–æ—Ä–æ–≥', correct: true },
      { src: 'img/tea-cup-clipart-lg',    caption: '–ß–∞—à–∫–∞',   correct: false },
      { src: 'img/tree-swing-clipart-lg.png',   caption: '–î–µ—Ä–µ–≤–æ',  correct: false }
    ]
  },
  {
    letter: '–û',
    word: '–û–±–µ–∑—å—è–Ω–∞',
    options: [
      { src: 'img/monkey-clipart-lg.png', caption: '–û–±–µ–∑—å—è–Ω–∞', correct: true },
      { src: 'img/rocket-clipart-lg.png', caption: '–†–∞–∫–µ—Ç–∞',   correct: false },
      { src: 'img/morning-glory-flower-clipart-lg.png', caption: '–¶–≤–µ—Ç–æ–∫',   correct: false }
    ]
  },
  {
    letter: '–ü',
    word: '–ü–∞–Ω–¥–∞',
    options: [
      { src: 'img/panda-with-bamboo-clipart-lg.png',  caption: '–ü–∞–Ω–¥–∞', correct: true },
      { src: 'img/sun-clipart-lg.png',    caption: '–°–æ–ª–Ω—Ü–µ', correct: false },
      { src: 'img/bus-car-clipart-lg.png',    caption: '–ê–≤—Ç–æ–±—É—Å', correct: false }
    ]
  },
  {
    letter: '–†',
    word: '–†—ã–±–∞',
    options: [
      { src: 'img/ert.png',   caption: '–†—ã–±–∞', correct: true },
      { src: 'img/doll-clipart-lg.png',   caption: '–ö—É–∫–ª–∞', correct: false },
      { src: 'img/country-house-clipart-lg.png',  caption: '–î–æ–º',   correct: false }
    ]
  },
  {
    letter: '–°',
    word: '–°–æ–±–∞–∫–∞',
    options: [
      { src: 'img/rty.png',    caption: '–°–æ–±–∞–∫–∞', correct: true },
      { src: 'img/carrot-vegetable-clipart-lg.png', caption: '–ú–æ—Ä–∫–æ–≤—å', correct: false },
      { src: 'img/vintage-airplane-clipart-lg.png',  caption: '–°–∞–º–æ–ª—ë—Ç', correct: false }
    ]
  },
  {
    letter: '–¢',
    word: '–¢–∏–≥—Ä',
    options: [
      { src: 'img/bengal-tiger-clipart-lg.png',  caption: '–¢–∏–≥—Ä',  correct: true },
      { src: 'img/cardboard-box-clipart-lg.png',    caption: '–ö–æ—Ä–æ–±–∫–∞', correct: false },
      { src: 'img/ghf.png',    caption: '–®–ª—è–ø–∞', correct: false }
    ]
  },
  {
    letter: '–£',
    word: '–£—Ç–∫–∞',
    options: [
      { src: 'img/rubber-duck-clipart-lg.png',   caption: '–£—Ç–∫–∞',  correct: true },
      { src: 'img/shooting-star-clipart-lg.png',   caption: '–ó–≤–µ–∑–¥–∞', correct: false },
      { src: 'img/bullet-train-clipart-lg.png',  caption: '–ü–æ–µ–∑–¥', correct: false }
    ]
  },
  {
    letter: '–§',
    word: '–§–ª–∞–º–∏–Ω–≥–æ',
    options: [
      { src: 'img/flamingo-clipart-lg.png', caption: '–§–ª–∞–º–∏–Ω–≥–æ', correct: true },
      { src: 'img/apple-fruits-food-clipart-lg.png',    caption: '–Ø–±–ª–æ–∫–æ',   correct: false },
      { src: 'img/cloud-with-rain-clipart-lg.png',    caption: '–û–±–ª–∞–∫–æ',   correct: false }
    ]
  },
  {
    letter: '–•',
    word: '–•–æ–º—è–∫',
    options: [
      { src: 'img/refrigerator-clipart-lg.png', caption: '–•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫', correct: true },
      { src: 'img/cake-with-a-candle-clipart-lg.png',    caption: '–¢–æ—Ä—Ç',  correct: false },
      { src: 'img/aircraft-clipart-lg.png',   caption: '–°–∞–º–æ–ª—ë—Ç', correct: false }
    ]
  },
  {
    letter: '–¶',
    word: '–¶—ã–ø–ª—ë–Ω–æ–∫',
    options: [
      { src: 'img/easter-chicken-clipart-lg.png',  caption: '–¶—ã–ø–ª—ë–Ω–æ–∫', correct: true },
      { src: 'img/beach-ball-clipart-lg.png',   caption: '–ú—è—á',      correct: false },
      { src: 'img/orange-flower-clipart-lg.png', caption: '–¶–≤–µ—Ç–æ–∫',   correct: false }
    ]
  },
  {
    letter: '–ß',
    word: '–ß–µ—Ä–µ–ø–∞—Ö–∞',
    options: [
      { src: 'img/turtle-clipart-lg.png', caption: '–ß–µ—Ä–µ–ø–∞—Ö–∞', correct: true },
      { src: 'img/bus-car-clipart-lg.png',    caption: '–ê–≤—Ç–æ–±—É—Å',  correct: false },
      { src: 'img/cowboy-hat-clipart-lg.png',    caption: '–®–ª—è–ø–∞',    correct: false }
    ]
  },
  {
    letter: '–®',
    word: '–®–∞—Ä',
    options: [
      { src: 'img/wardrobe-furniture-clipart-lg.png', caption: '–®–∫–∞—Ñ',   correct: true },
      { src: 'img/tree-clipart-lg.png',    caption: '–î–µ—Ä–µ–≤–æ',correct: false },
      { src: 'img/kitten-clipart-lg.png',     caption: '–ö–æ—Ç',   correct: false }
    ]
  },
  {
    letter: '–©',
    word: '–©–µ–Ω–æ–∫',
    options: [
      { src: 'img/birthday-boy-with-his-new-puppy-clipart-lg.png', caption: '–©–µ–Ω–æ–∫', correct: true },
      { src: 'img/race-car-clipart-lg.png',   caption: '–ú–∞—à–∏–Ω–∞', correct: false },
      { src: 'img/cartoon-sun-clipart-lg.png',   caption: '–°–æ–ª–Ω—Ü–µ', correct: false }
    ]
  },
  {
    letter: '–™',
    word: '–¢–≤—ë—Ä–¥—ã–π –∑–Ω–∞–∫',
    options: [
      { src: 'img/tv_sign.png',   caption: '–¢–≤—ë—Ä–¥—ã–π –∑–Ω–∞–∫', correct: true },
      { src: 'img/horoscope-book-clipart-lg.png',   caption: '–ö–Ω–∏–≥–∞',         correct: false },
      { src: 'img/shooting-star-clipart-lg.png',   caption: '–ó–≤–µ–∑–¥–∞',        correct: false }
    ]
  },
  {
    letter: '–´',
    word: '–°—ã—Ä',
    options: [
      { src: 'img/y_cheese.png', caption: '–°—ã—Ä',  correct: true },
      { src: 'img/cloud-with-rain-clipart-lg.png', caption: '–û–±–ª–∞–∫–æ', correct: false },
      { src: 'img/train-clipart-lg.png', caption: '–ü–æ–µ–∑–¥',  correct: false }
    ]
  },
  {
    letter: '–¨',
    word: '–ú—è–≥–∫–∏–π –∑–Ω–∞–∫',
    options: [
      { src: 'img/myag_sign.png', caption: '–ú—è–≥–∫–∏–π –∑–Ω–∞–∫', correct: true },
      { src: 'img/wild-cherry-tree-spring-leaf-clipart-lg.png', caption: '–õ–∏—Å—Ç',        correct: false },
      { src: 'img/doll-clipart-lg.png', caption: '–ö—É–∫–ª–∞',       correct: false }
    ]
  },
  {
    letter: '–≠',
    word: '–≠—Å–∫–∏–º–æ',
    options: [
      { src: 'img/icepop-clipart-lg.png', caption: '–≠—Å–∫–∏–º–æ', correct: true },
      { src: 'img/airplane-clipart-lg.png',   caption: '–°–∞–º–æ–ª—ë—Ç', correct: false },
      { src: 'img/beach-ball-clipart-lg.png',     caption: '–ú—è—á',     correct: false }
    ]
  },
  {
    letter: '–Æ',
    word: '–Æ–ª–∞',
    options: [
      { src: 'img/png-klev-club-dx7m-p-yula-png-17.png', caption: '–Æ–ª–∞',   correct: true },
      { src: 'img/bear-clipart-lg.png',    caption: '–ú–µ–¥–≤–µ–¥—å', correct: false },
      { src: 'img/horoscope-book-clipart-lg.png',    caption: '–ö–Ω–∏–≥–∞',   correct: false }
    ]
  },
  {
    letter: '–Ø',
    word: '–Ø–±–ª–æ–∫–æ',
    options: [
      { src: 'img/apple-fruits-food-clipart-lg.png', caption: '–Ø–±–ª–æ–∫–æ', correct: true },
      { src: 'img/11452733.png',   caption: '–ú–∞—à–∏–Ω–∞', correct: false },
      { src: 'img/orange-flower-clipart-lg.png',caption: '–¶–≤–µ—Ç–æ–∫', correct: false }
    ]
  }
];

const letterBox = document.getElementById('letterBox');
  const imagesRow = document.getElementById('imagesRow');
  const messageEl = document.getElementById('message');
  const levelInfo = document.getElementById('levelInfo');
  const fanfareSound = document.getElementById('fanfareSound');
  const wrongSound = document.getElementById('wrongSound');
  const confettiContainer = document.getElementById('confettiContainer');
  const winOverlay = document.getElementById('winOverlay');
  const restartAllBtn = document.getElementById('restartAllBtn');

  let currentLevel = 0;
  let locked = false; // –±–ª–æ–∫–∏—Ä—É–µ–º –∫–ª–∏–∫–∏ –≤–æ –≤—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏

  function renderLevel(index) {
    const level = LEVELS[index];
    if (!level) return;
    letterBox.textContent = level.letter;
    levelInfo.textContent = `–ë—É–∫–≤–∞ ¬´${level.letter}¬ª. –ù–∞–π–¥–∏ —Å–ª–æ–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–∞ —ç—Ç—É –±—É–∫–≤—É.`;
    messageEl.textContent = '';
    messageEl.className = 'message';
    imagesRow.innerHTML = '';

    const shuffled = [...level.options].sort(() => Math.random() - 0.5);
    shuffled.forEach((opt) => {
      const card = document.createElement('div');
      card.className = 'image-option';
      const img = document.createElement('img');
      img.src = opt.src;
      img.alt = opt.caption;

      const cap = document.createElement('div');
      cap.className = 'image-caption';
      cap.textContent = opt.caption;

      card.appendChild(img);
      card.appendChild(cap);

      card.addEventListener('click', () => {
        if (locked) return;
        handleAnswer(card, opt.correct);
      });

      imagesRow.appendChild(card);
    });
  }

  function showConfettiBurst() {
    const emojis = ['üéâ','‚ú®','üéà','üåü','üí´','üéä'];
    for (let i = 0; i < 50; i++) {
      const conf = document.createElement('div');
      conf.className = 'confetti';
      conf.textContent = emojis[Math.floor(Math.random()*emojis.length)];
      conf.style.left = Math.random()*100 + '%';
      conf.style.animationDuration = (1.6 + Math.random()*1.2) + 's';
      confettiContainer.appendChild(conf);
      setTimeout(() => conf.remove(), 2500);
    }
  }

  function handleAnswer(card, isCorrect) {
    if (isCorrect) {
      locked = true;
      card.classList.add('correct');
      messageEl.textContent = '–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü!';
      messageEl.className = 'message ok';
      if (fanfareSound) {
        fanfareSound.currentTime = 0;
        fanfareSound.play().catch(()=>{});
      }
      showConfettiBurst();
      setTimeout(() => {
        currentLevel++;
        if (currentLevel >= LEVELS.length) {
          winOverlay.style.display = 'flex';
        } else {
          locked = false;
          renderLevel(currentLevel);
        }
      }, 2000);
    } else {
      card.classList.add('wrong');
      messageEl.textContent = '–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ üò¢ –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑!';
      messageEl.className = 'message error';
      if (wrongSound) {
        wrongSound.currentTime = 0;
        wrongSound.play().catch(()=>{});
      }
      setTimeout(() => {
        card.classList.remove('wrong');
      }, 800);
    }
  }

  restartAllBtn.addEventListener('click', () => {
    winOverlay.style.display = 'none';
    currentLevel = 0;
    locked = false;
    renderLevel(currentLevel);
  });

  renderLevel(currentLevel);
</script>
</body>
</html>
